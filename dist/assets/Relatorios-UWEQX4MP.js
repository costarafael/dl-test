import{r as t,j as e,B as n,F as y,L as f,c as V,T as k,f as E,g as a}from"./index-DOaqLF5S.js";import{C as l}from"./Card-Czmt41UV.js";import{fichasEPI as u,empresas as L,colaboradores as T}from"./data-BSKl3oWz.js";import{F as b}from"./ClipboardDocumentListIcon-DCDswLyp.js";import{F as $}from"./ChartBarIcon-BG6Ly700.js";import{F as H}from"./ArrowDownTrayIcon-BeJoba6h.js";function M({title:r,titleId:d,...m},h){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:h,"aria-labelledby":d},m),r?t.createElement("title",{id:d},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const F=t.forwardRef(M);function q({title:r,titleId:d,...m},h){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:h,"aria-labelledby":d},m),r?t.createElement("title",{id:d},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const C=t.forwardRef(q),U=()=>{const[r,d]=t.useState(""),[m,h]=t.useState(""),[v,R]=t.useState(""),I=u.length,P=u.filter(s=>s.status==="ativo").length,A=u.reduce((s,o)=>{var c;return s+(((c=o.itens)==null?void 0:c.filter(x=>x.status==="entregue").length)||0)},0),z=u.reduce((s,o)=>{var x;const c=((x=o.itens)==null?void 0:x.filter(j=>{if(j.status!=="entregue")return!1;const i=new Date(j.dataValidade),p=new Date,g=Math.ceil((i.getTime()-p.getTime())/(1e3*3600*24));return g<=30&&g>0}).length)||0;return s+c},0),N=()=>{alert(`Relatório "${r}" gerado com sucesso!
Período: ${m} até ${v}`)},w=[{id:"fichas-ativas",nome:"Fichas Ativas por Colaborador",descricao:"Lista de todas as fichas ativas com itens entregues",icon:C},{id:"posicao-estoque",nome:"Posição Atual de Estoque",descricao:"Relatório detalhado do estoque atual por EPI",icon:b},{id:"epis-vencimento",nome:"EPIs Próximos ao Vencimento",descricao:"Lista de EPIs que vencem nos próximos 30 dias",icon:F},{id:"movimentacao",nome:"Movimentação de Estoque",descricao:"Histórico de entradas e saídas do estoque",icon:$}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Relatórios"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(n,{color:"primary",size:"lg",className:"p-3 rounded-full w-fit",children:e.jsx(y,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total de Fichas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:I})]})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(n,{color:"green",size:"lg",className:"p-3 rounded-full w-fit",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Fichas Ativas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:P})]})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(n,{color:"purple",size:"lg",className:"p-3 rounded-full w-fit",children:e.jsx(b,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"EPIs Entregues"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A})]})]})}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(n,{color:"yellow",size:"lg",className:"p-3 rounded-full w-fit",children:e.jsx(F,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Vencendo (30d)"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:z})]})]})})]}),e.jsx(l,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Gerar Relatório"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(f,{htmlFor:"tipoRelatorio",className:"text-gray-700 dark:text-gray-300",children:"Tipo de Relatório"}),e.jsxs(V,{id:"tipoRelatorio",value:r,onChange:s=>d(s.target.value),sizing:"sm",className:"rounded-sm",children:[e.jsx("option",{value:"",children:"Selecione o tipo"}),w.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"periodoInicio",className:"text-gray-700 dark:text-gray-300",children:"Data Inicial"}),e.jsx(k,{id:"periodoInicio",type:"date",value:m,onChange:s=>h(s.target.value),sizing:"sm",className:"rounded-sm"})]}),e.jsxs("div",{children:[e.jsx(f,{htmlFor:"periodoFim",className:"text-gray-700 dark:text-gray-300",children:"Data Final"}),e.jsx(k,{id:"periodoFim",type:"date",value:v,onChange:s=>R(s.target.value),sizing:"sm",className:"rounded-sm"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(E,{onClick:N,disabled:!r,color:"primary",sizing:"xs",className:"rounded-sm",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Visualizar"]}),e.jsxs(E,{onClick:N,disabled:!r,color:"success",sizing:"xs",className:"rounded-sm",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Exportar PDF"]})]})]})}),e.jsx(l,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Relatórios Disponíveis"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(s=>{const o=s.icon;return e.jsx(l,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(n,{color:"gray",size:"lg",className:"p-2 rounded-sm w-fit",children:e.jsx(o,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:s.nome}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:s.descricao}),e.jsx("div",{className:"mt-2",children:e.jsx(n,{color:"gray",size:"sm",className:"w-fit",children:"Disponível"})})]})]})},s.id)})})]})}),e.jsx(l,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Resumo por Empresa"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(a,{hoverable:!0,children:[e.jsxs(a.Head,{children:[e.jsx(a.HeadCell,{children:"Empresa"}),e.jsx(a.HeadCell,{children:"Colaboradores"}),e.jsx(a.HeadCell,{children:"Fichas Ativas"}),e.jsx(a.HeadCell,{children:"EPIs Entregues"}),e.jsx(a.HeadCell,{children:"Status"})]}),e.jsx(a.Body,{className:"divide-y",children:L.map(s=>{const o=T.filter(i=>i.empresaId===s.id),c=u.filter(i=>i.empresaId===s.id),x=c.filter(i=>i.status==="ativo"),j=c.reduce((i,p)=>{var g;return i+(((g=p.itens)==null?void 0:g.filter(D=>D.status==="entregue").length)||0)},0);return e.jsxs(a.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(a.Cell,{className:"font-medium text-gray-900 dark:text-white",children:s.nome}),e.jsx(a.Cell,{className:"text-gray-900 dark:text-white",children:o.length}),e.jsx(a.Cell,{className:"text-gray-900 dark:text-white",children:x.length}),e.jsx(a.Cell,{className:"text-gray-900 dark:text-white",children:j}),e.jsx(a.Cell,{className:"text-gray-900 dark:text-white",children:e.jsx(n,{color:s.status==="ativa"?"success":"gray",children:s.status})})]},s.id)})})]})})]})})]})};export{U as default};
//# sourceMappingURL=Relatorios-UWEQX4MP.js.map
