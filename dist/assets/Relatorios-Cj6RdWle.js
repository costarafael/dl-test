import{r as a,j as e,B as m,F as y,L as j,d as D,T as w,c as k}from"./index-CQ_zEG3X.js";import{C as o}from"./Card-ChAuhdKP.js";import{f as g,F as V,a as L,c as M}from"./data-Duyhov1Y.js";import{F as b}from"./ClipboardDocumentListIcon-D4z4dxrA.js";function $({title:t,titleId:r,...l},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":r},l),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const E=a.forwardRef($);function B({title:t,titleId:r,...l},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":r},l),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const T=a.forwardRef(B);function q({title:t,titleId:r,...l},c){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":r},l),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const F=a.forwardRef(q),G=()=>{const[t,r]=a.useState(""),[l,c]=a.useState(""),[f,R]=a.useState(""),C=g.length,I=g.filter(s=>s.status==="ativo").length,A=g.reduce((s,d)=>{var n;return s+(((n=d.itens)==null?void 0:n.filter(x=>x.status==="entregue").length)||0)},0),P=g.reduce((s,d)=>{var x;const n=((x=d.itens)==null?void 0:x.filter(p=>{if(p.status!=="entregue")return!1;const i=new Date(p.dataValidade),u=new Date,h=Math.ceil((i.getTime()-u.getTime())/(1e3*3600*24));return h<=30&&h>0}).length)||0;return s+n},0),v=()=>{alert(`Relatório "${t}" gerado com sucesso!
Período: ${l} até ${f}`)},N=[{id:"fichas-ativas",nome:"Fichas Ativas por Colaborador",descricao:"Lista de todas as fichas ativas com itens entregues",icon:F},{id:"posicao-estoque",nome:"Posição Atual de Estoque",descricao:"Relatório detalhado do estoque atual por EPI",icon:b},{id:"epis-vencimento",nome:"EPIs Próximos ao Vencimento",descricao:"Lista de EPIs que vencem nos próximos 30 dias",icon:E},{id:"movimentacao",nome:"Movimentação de Estoque",descricao:"Histórico de entradas e saídas do estoque",icon:T}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Relatórios"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(o,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{color:"blue",size:"lg",className:"p-3 rounded-full w-fit",children:e.jsx(y,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total de Fichas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C})]})]})}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{color:"green",size:"lg",className:"p-3 rounded-full w-fit",children:e.jsx(F,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Fichas Ativas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:I})]})]})}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{color:"purple",size:"lg",className:"p-3 rounded-full w-fit",children:e.jsx(b,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"EPIs Entregues"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:A})]})]})}),e.jsx(o,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(m,{color:"yellow",size:"lg",className:"p-3 rounded-full w-fit",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Vencendo (30d)"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:P})]})]})})]}),e.jsx(o,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Gerar Relatório"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"tipoRelatorio",className:"text-gray-700 dark:text-gray-300",children:"Tipo de Relatório"}),e.jsxs(D,{id:"tipoRelatorio",value:t,onChange:s=>r(s.target.value),sizing:"sm",className:"rounded-sm",children:[e.jsx("option",{value:"",children:"Selecione o tipo"}),N.map(s=>e.jsx("option",{value:s.id,children:s.nome},s.id))]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"periodoInicio",className:"text-gray-700 dark:text-gray-300",children:"Data Inicial"}),e.jsx(w,{id:"periodoInicio",type:"date",value:l,onChange:s=>c(s.target.value),sizing:"sm",className:"rounded-sm"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"periodoFim",className:"text-gray-700 dark:text-gray-300",children:"Data Final"}),e.jsx(w,{id:"periodoFim",type:"date",value:f,onChange:s=>R(s.target.value),sizing:"sm",className:"rounded-sm"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(k,{onClick:v,disabled:!t,color:"blue",sizing:"sm",className:"rounded-sm",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Visualizar"]}),e.jsxs(k,{onClick:v,disabled:!t,color:"success",sizing:"sm",className:"rounded-sm",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Exportar PDF"]})]})]})}),e.jsx(o,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Relatórios Disponíveis"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(s=>{const d=s.icon;return e.jsx(o,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(m,{color:"gray",size:"lg",className:"p-2 rounded-sm w-fit",children:e.jsx(d,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:s.nome}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:s.descricao}),e.jsx("div",{className:"mt-2",children:e.jsx(m,{color:"gray",size:"sm",className:"w-fit",children:"Disponível"})})]})]})},s.id)})})]})}),e.jsx(o,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Resumo por Empresa"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 dark:text-gray-400 uppercase bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Empresa"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Colaboradores"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Fichas Ativas"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"EPIs Entregues"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"})]})}),e.jsx("tbody",{children:L.map(s=>{const d=M.filter(i=>i.empresaId===s.id),n=g.filter(i=>i.empresaId===s.id),x=n.filter(i=>i.status==="ativo"),p=n.reduce((i,u)=>{var h;return i+(((h=u.itens)==null?void 0:h.filter(z=>z.status==="entregue").length)||0)},0);return e.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:s.nome}),e.jsx("td",{className:"px-6 py-4 text-gray-900 dark:text-white",children:d.length}),e.jsx("td",{className:"px-6 py-4 text-gray-900 dark:text-white",children:x.length}),e.jsx("td",{className:"px-6 py-4 text-gray-900 dark:text-white",children:p}),e.jsx("td",{className:"px-6 py-4 text-gray-900 dark:text-white",children:e.jsx(m,{color:s.status==="ativa"?"success":"gray",children:s.status})})]},s.id)})})]})})]})})]})};export{G as default};
//# sourceMappingURL=Relatorios-Cj6RdWle.js.map
