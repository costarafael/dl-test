import{r as l,j as e,c as o,D as x,L as i,T as g,d as E,C as z,B as R,P as q,M as D,e as B}from"./index-CQ_zEG3X.js";import{F as T,I as U,g as $}from"./epiIcons-CXKWEjwl.js";import{t as b,F as S}from"./data-Duyhov1Y.js";import{F as k}from"./PlusIcon-DaFp-LMr.js";import{F as I,a as O}from"./EyeIcon-DqzU-6mw.js";function V({title:n,titleId:u,...m},w){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:w,"aria-labelledby":u},m),n?l.createElement("title",{id:u},n):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const H=l.forwardRef(V),Q=()=>{const[n,u]=l.useState(""),[m,w]=l.useState(""),[A,C]=l.useState(!1),[t,M]=l.useState("create"),[a,c]=l.useState(null),[d,y]=l.useState(b),[j,p]=l.useState([]),F=Array.from(new Set(b.map(s=>s.categoria)));l.useEffect(()=>{const s=b.filter(r=>{const h=r.nomeEquipamento.toLowerCase().includes(n.toLowerCase())||r.numeroCA.toLowerCase().includes(n.toLowerCase()),f=!m||r.categoria===m;return h&&f});y(s)},[n,m]);const N=(s,r)=>{M(s),c(r||null),C(!0)},v=()=>{C(!1),c(null)},P=s=>{p(s?d.map(r=>r.id):[])},L=(s,r)=>{p(r?[...j,s]:j.filter(h=>h!==s))};return e.jsxs("div",{className:"bg-white dark:bg-gray-900",children:[e.jsx("div",{className:"mx-auto max-w-full",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 relative shadow-md sm:rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Catálogo de EPIs"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gerencie os tipos de Equipamentos de Proteção Individual"})]}),e.jsxs("div",{className:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0",children:[e.jsxs(o,{onClick:()=>N("create"),color:"blue",sizing:"sm",className:"rounded-sm",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Novo EPI"]}),e.jsxs(x,{label:"",dismissOnClick:!1,renderTrigger:()=>e.jsx(o,{color:"light",sizing:"sm",className:"rounded-sm",children:e.jsx(I,{className:"w-4 h-4"})}),children:[e.jsx(x.Item,{icon:S,children:"Exportar"}),e.jsx(x.Item,{icon:k,children:"Importar"})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4 border-t dark:border-gray-700",children:[e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx(i,{htmlFor:"table-search",className:"sr-only",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx(g,{id:"table-search",placeholder:"Buscar EPIs...",value:n,onChange:s=>u(s.target.value),sizing:"sm",className:"pl-10 rounded-sm"})]})]}),e.jsxs("div",{className:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0",children:[e.jsxs(E,{value:m,onChange:s=>w(s.target.value),sizing:"sm",className:"rounded-sm",children:[e.jsx("option",{value:"",children:"Todas as categorias"}),F.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs(o,{color:"light",sizing:"sm",className:"rounded-sm",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Filtros"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{checked:j.length===d.length&&d.length>0,onChange:s=>P(s.target.checked)}),e.jsx(i,{htmlFor:"checkbox-all",className:"sr-only",children:"checkbox"})]})}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Foto"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"CA"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Equipamento"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Fabricante"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Categoria"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Vida Útil"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:e.jsx("span",{className:"sr-only",children:"Ações"})})]})}),e.jsx("tbody",{children:d.map(s=>e.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"w-4 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{checked:j.includes(s.id),onChange:r=>L(s.id,r.target.checked)}),e.jsx(i,{htmlFor:`checkbox-${s.id}`,className:"sr-only",children:"checkbox"})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx(U,{icon:$(s.categoria,"w-6 h-6"),color:"gray",size:"lg"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-white",children:s.numeroCA}),e.jsx("th",{scope:"row",className:"px-4 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("div",{className:"text-base font-semibold",children:s.nomeEquipamento})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-gray-900 dark:text-white",children:s.fabricante}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx(R,{color:"gray",children:s.categoria})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-gray-900 dark:text-white",children:[s.vidaUtilDias," dias"]}),e.jsxs("td",{className:"px-4 py-4 flex items-center justify-end",children:[e.jsx(o,{sizing:"sm",color:"blue",onClick:()=>N("view",s),className:"mr-2 rounded-sm",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx(o,{sizing:"sm",color:"light",onClick:()=>N("edit",s),className:"mr-2 rounded-sm",children:e.jsx(H,{className:"w-4 h-4"})}),e.jsxs(x,{label:"",dismissOnClick:!1,renderTrigger:()=>e.jsx(o,{sizing:"sm",color:"light",className:"rounded-sm",children:e.jsx(I,{className:"w-4 h-4"})}),children:[e.jsx(x.Item,{icon:k,children:"Duplicar"}),e.jsx(x.Item,{icon:S,children:"Exportar"})]})]})]},s.id))})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0 p-4",children:[e.jsxs("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["Mostrando ",e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["1-",d.length]})," de ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:d.length})]}),e.jsx(q,{currentPage:1,totalPages:1,onPageChange:()=>{},showIcons:!0})]})]})}),e.jsx(D,{show:A,onClose:v,size:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:[t==="create"&&"Novo EPI",t==="edit"&&"Editar EPI",t==="view"&&"Detalhes do EPI"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"numeroCA",className:"text-gray-700 dark:text-gray-300",children:"Número do CA"}),e.jsx(g,{id:"numeroCA",value:(a==null?void 0:a.numeroCA)||"",onChange:s=>a&&c({...a,numeroCA:s.target.value}),disabled:t==="view",sizing:"sm",className:"rounded-sm"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"nomeEquipamento",className:"text-gray-700 dark:text-gray-300",children:"Nome do Equipamento"}),e.jsx(g,{id:"nomeEquipamento",value:(a==null?void 0:a.nomeEquipamento)||"",onChange:s=>a&&c({...a,nomeEquipamento:s.target.value}),disabled:t==="view",sizing:"sm",className:"rounded-sm"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"fabricante",className:"text-gray-700 dark:text-gray-300",children:"Fabricante"}),e.jsx(g,{id:"fabricante",value:(a==null?void 0:a.fabricante)||"",onChange:s=>a&&c({...a,fabricante:s.target.value}),disabled:t==="view",sizing:"sm",className:"rounded-sm"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"categoria",className:"text-gray-700 dark:text-gray-300",children:"Categoria"}),e.jsxs(E,{id:"categoria",value:(a==null?void 0:a.categoria)||"",onChange:s=>a&&c({...a,categoria:s.target.value}),disabled:t==="view",sizing:"sm",className:"rounded-sm",children:[e.jsx("option",{value:"",children:"Selecione uma categoria"}),F.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"vidaUtilDias",className:"text-gray-700 dark:text-gray-300",children:"Vida Útil (dias)"}),e.jsx(g,{id:"vidaUtilDias",type:"number",value:(a==null?void 0:a.vidaUtilDias)||"",onChange:s=>a&&c({...a,vidaUtilDias:parseInt(s.target.value)||0}),disabled:t==="view",sizing:"sm",className:"rounded-sm"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"foto",className:"text-gray-700 dark:text-gray-300",children:"Foto do EPI"}),e.jsx(B,{id:"foto",accept:"image/*",onChange:s=>{if(s.target.files&&s.target.files[0]&&a){const r=new FileReader;r.onload=h=>{var f;c({...a,foto:(f=h.target)==null?void 0:f.result})},r.readAsDataURL(s.target.files[0])}},disabled:t==="view",sizing:"sm",className:"rounded-sm"})]})]}),(a==null?void 0:a.foto)&&e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{className:"text-gray-700 dark:text-gray-300",children:"Pré-visualização"}),e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:a.foto,alt:"Pré-visualização",className:"h-32 w-32 object-cover rounded-sm"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(o,{color:"light",onClick:v,sizing:"sm",className:"rounded-sm",children:"Cancelar"}),t!=="view"&&e.jsx(o,{color:"blue",onClick:()=>{if(a){if(t==="create"){const s={...a,id:Math.random().toString(36).substr(2,9)};y([...d,s])}else y(d.map(s=>s.id===a.id?a:s));v()}},sizing:"sm",className:"rounded-sm",children:t==="create"?"Cadastrar":"Salvar"})]})]})})]})};export{Q as default};
//# sourceMappingURL=CatalogoEPIs-FXJLpI_-.js.map
