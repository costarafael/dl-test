import{r as t,j as e,c as d,D as x,L as c,T as y,d as w,C as E,B,P as O,M as D,f as $}from"./index-CQ_zEG3X.js";import{F as V,I as H,g as J}from"./epiIcons-CXKWEjwl.js";import{e as W,t as v,F as C}from"./data-Duyhov1Y.js";import{S as Q}from"./StatusIndicator-D-Ag2qs0.js";import{F}from"./EyeIcon-DqzU-6mw.js";function U({title:o,titleId:r,...l},h){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:h,"aria-labelledby":r},l),o?t.createElement("title",{id:r},o):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const S=t.forwardRef(U);function G({title:o,titleId:r,...l},h){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:h,"aria-labelledby":r},l),o?t.createElement("title",{id:r},o):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const b=t.forwardRef(G),ee=()=>{const[o,r]=t.useState(!1),[l,h]=t.useState("entrada"),[N,I]=t.useState(null),[u,z]=t.useState(""),[j,q]=t.useState(""),[p,g]=t.useState([]),k=s=>s.quantidade||0,A=s=>s?(typeof s=="string"?new Date(s):s).toLocaleDateString("pt-BR"):"-",P=s=>s<=0?"falta":s<=10?"baixo":"normal",f=(s,a)=>{h(s),I(a||null),r(!0)},i=W.filter(s=>{const a=v.find(T=>T.id===s.tipoEPIId);if(!a)return!1;const m=!u||a.nomeEquipamento.toLowerCase().includes(u.toLowerCase())||a.numeroCA.toLowerCase().includes(u.toLowerCase())||a.fabricante.toLowerCase().includes(u.toLowerCase()),n=k(s),R=!j||j==="normal"&&n>10||j==="baixo"&&n>0&&n<=10||j==="falta"&&n<=0;return m&&R}),L=s=>{g(s?i.map(a=>a.id):[])},M=(s,a)=>{g(a?[...p,s]:p.filter(m=>m!==s))};return e.jsxs("div",{className:"bg-white dark:bg-gray-900",children:[e.jsx("div",{className:"mx-auto max-w-full",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 relative shadow-md sm:rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Estoque"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Controle de entrada, saída e níveis de estoque"})]}),e.jsxs("div",{className:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0",children:[e.jsxs(d,{onClick:()=>f("entrada"),color:"success",sizing:"sm",className:"rounded-sm",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Entrada"]}),e.jsxs(d,{onClick:()=>f("ajuste"),color:"light",sizing:"sm",className:"rounded-sm",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Ajuste"]}),e.jsxs(x,{label:"",dismissOnClick:!1,renderTrigger:()=>e.jsx(d,{color:"light",sizing:"sm",className:"rounded-sm",children:e.jsx(F,{className:"w-4 h-4"})}),children:[e.jsx(x.Item,{icon:C,children:"Exportar"}),e.jsx(x.Item,{icon:b,children:"Relatório de estoque"})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4 border-t dark:border-gray-700",children:[e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx(c,{htmlFor:"table-search",className:"sr-only",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx(y,{id:"table-search",placeholder:"Buscar itens do estoque...",value:u,onChange:s=>z(s.target.value),sizing:"sm",className:"pl-10 rounded-sm"})]})]}),e.jsxs("div",{className:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0",children:[e.jsxs(w,{value:j,onChange:s=>q(s.target.value),sizing:"sm",className:"rounded-sm",children:[e.jsx("option",{value:"",children:"Todos os status"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"baixo",children:"Baixo"}),e.jsx("option",{value:"falta",children:"Em falta"})]}),e.jsxs(d,{color:"light",sizing:"sm",className:"rounded-sm",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Filtros"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{checked:p.length===i.length&&i.length>0,onChange:s=>L(s.target.checked)}),e.jsx(c,{htmlFor:"checkbox-all",className:"sr-only",children:"checkbox"})]})}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"EPI"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"N° CA"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Categoria"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Saldo"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Validade"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:"Lote"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:e.jsx("span",{className:"sr-only",children:"Ações"})})]})}),e.jsx("tbody",{children:i.map(s=>{const a=v.find(n=>n.id===s.tipoEPIId);if(!a)return null;const m=k(s);return e.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"w-4 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{checked:p.includes(s.id),onChange:n=>M(s.id,n.target.checked)}),e.jsx(c,{htmlFor:`checkbox-${s.id}`,className:"sr-only",children:"checkbox"})]})}),e.jsxs("th",{scope:"row",className:"flex items-center px-4 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:[e.jsx(H,{icon:J(a.categoria,"w-6 h-6"),color:"gray",size:"lg"}),e.jsxs("div",{className:"ps-3",children:[e.jsx("div",{className:"text-base font-semibold",children:a.nomeEquipamento}),e.jsx("div",{className:"font-normal text-gray-500 dark:text-gray-400",children:a.fabricante})]})]}),e.jsx("td",{className:"px-4 py-4 font-medium text-gray-900 dark:text-white",children:a.numeroCA}),e.jsx("td",{className:"px-4 py-4",children:e.jsx(B,{color:"gray",children:a.categoria})}),e.jsx("td",{className:"px-4 py-4 font-bold text-gray-900 dark:text-white",children:m}),e.jsx("td",{className:"px-4 py-4",children:e.jsx(Q,{status:P(m),variant:"estoque"})}),e.jsx("td",{className:"px-4 py-4 text-gray-900 dark:text-white",children:A(s.dataValidade)}),e.jsx("td",{className:"px-4 py-4 text-gray-900 dark:text-white",children:s.lote||"-"}),e.jsxs("td",{className:"px-4 py-4 flex items-center justify-end",children:[e.jsx(d,{sizing:"sm",color:"success",onClick:()=>f("entrada",s),className:"mr-2 rounded-sm",children:e.jsx(b,{className:"w-4 h-4"})}),e.jsx(d,{sizing:"sm",color:"light",onClick:()=>f("ajuste",s),className:"mr-2 rounded-sm",children:e.jsx(S,{className:"w-4 h-4"})}),e.jsxs(x,{label:"",dismissOnClick:!1,renderTrigger:()=>e.jsx(d,{sizing:"sm",color:"light",className:"rounded-sm",children:e.jsx(F,{className:"w-4 h-4"})}),children:[e.jsx(x.Item,{icon:C,children:"Exportar histórico"}),e.jsx(x.Item,{children:"Ver movimentações"})]})]})]},s.id)})})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0 p-4",children:[e.jsxs("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["Mostrando ",e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:["1-",i.length]})," de ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:i.length})]}),e.jsx(O,{currentPage:1,totalPages:1,onPageChange:()=>{},showIcons:!0})]})]})}),e.jsx(D,{show:o,onClose:()=>r(!1),size:"xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:l==="entrada"?"Entrada de Estoque":"Ajuste de Estoque"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"epi",className:"text-gray-700 dark:text-gray-300",children:"EPI"}),e.jsxs(w,{id:"epi",defaultValue:(N==null?void 0:N.tipoEPIId)||"",sizing:"sm",className:"rounded-sm",children:[e.jsx("option",{value:"",children:"Selecione um EPI"}),v.map(s=>e.jsxs("option",{value:s.id,children:[s.numeroCA," - ",s.nomeEquipamento]},s.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"quantidade",className:"text-gray-700 dark:text-gray-300",children:"Quantidade"}),e.jsx(y,{id:"quantidade",type:"number",placeholder:"Ex: 50",required:!0,sizing:"sm",className:"rounded-sm"})]}),l==="ajuste"&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"tipoAjuste",className:"text-gray-700 dark:text-gray-300",children:"Tipo de Ajuste"}),e.jsxs(w,{id:"tipoAjuste",sizing:"sm",className:"rounded-sm",children:[e.jsx("option",{value:"entrada",children:"Entrada"}),e.jsx("option",{value:"saida",children:"Saída"})]})]})]}),l==="entrada"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"dataFabricacao",className:"text-gray-700 dark:text-gray-300",children:"Data de Fabricação"}),e.jsx(y,{id:"dataFabricacao",type:"date",sizing:"sm",className:"rounded-sm"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"numeroNF",className:"text-gray-700 dark:text-gray-300",children:"Número da NF"}),e.jsx(y,{id:"numeroNF",placeholder:"Ex: NF-001234",sizing:"sm",className:"rounded-sm"})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"observacao",className:"text-gray-700 dark:text-gray-300",children:l==="entrada"?"Observação":"Justificativa"}),e.jsx($,{id:"observacao",placeholder:l==="entrada"?"Observações sobre a entrada...":"Justificativa para o ajuste...",rows:3,className:"rounded-sm"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(d,{onClick:()=>r(!1),color:"light",sizing:"sm",className:"rounded-sm",children:"Cancelar"}),e.jsx(d,{onClick:()=>r(!1),color:"blue",sizing:"sm",className:"rounded-sm",children:l==="entrada"?"Registrar Entrada":"Aplicar Ajuste"})]})]})})]})};export{ee as default};
//# sourceMappingURL=EstoqueEPIs-nGA4B8TF.js.map
